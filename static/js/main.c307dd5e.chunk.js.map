{"version":3,"sources":["component/Button/button.module.css","component/Searchbar/Searchbar.js","component/api-server/api-server.js","component/Modal/Modal.js","component/ImageGalleryItem/Imagegalleryitem.js","component/Button/Button.js","component/InputMessage/InputMesage.js","component/errorImg/Error.jpg","component/Error/Error.js","component/Imagegallery/Imagegallery.js","component/Container/Container.js","component/Layout/Layout.js","App.js","index.js","component/Searchbar/searchbar.module.css"],"names":["module","exports","Searchbar","onSubmit","useState","image","setImage","className","s","SearchForm","evt","preventDefault","trim","toast","error","position","theme","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","value","onChange","EventTarget","currentTarget","toLowerCase","propType","PropTypes","string","func","PhotoApiServer","this","searchQuery","page","url","fetch","then","response","ok","json","Promise","reject","Error","newQuery","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","props","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","onClick","children","Component","ImageGalleryItem","src","description","bigImg","showModal","setShowModal","toggleModal","alt","protoType","data","Button","InputMessage","message","errorImage","Status","photoApiServer","ImageGallery","imageName","images","setImages","setError","status","setStatus","updateImages","fetchImages","result","hits","length","updateImagesArray","incrementPage","scroll","catch","useEffect","resetPage","query","update","scrollTo","top","documentElement","scrollHeight","behavior","color","height","width","timeout","map","key","id","webformatURL","largeImageURL","tag","Container","Layout","App","state","handleFormSubmit","setState","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c307dd5e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"button_Button__m1iUa\"};","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './searchbar.module.css';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default function Searchbar({ onSubmit }) {\n  const [image, setImage] = useState('');\n\n  const handleImageChange = EventTarget => {\n    setImage(EventTarget.currentTarget.value.toLowerCase());\n  };\n\n  const handleSubmit = evt => {\n    evt.preventDefault();\n\n    if (image.trim() === '') {\n      toast.error('Введите название изображения!', {\n        position: 'top-left',\n        theme: 'colored',\n      });\n      return;\n    }\n    onSubmit(image);\n    setImage('');\n  };\n\n  return (\n    <header className={s.Searchbar}>\n      <form className={s.SearchForm} onSubmit={handleSubmit}>\n        <button type=\"submit\" className={s.SearchFormButton}>\n          <span className={s.SearchFormButtonLabel}>Search</span>\n        </button>\n\n        <input\n          className={s.SearchFormInput}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          value={image}\n          onChange={handleImageChange}\n        />\n      </form>\n    </header>\n  );\n}\n\nSearchbar.propType = {\n  value: PropTypes.string,\n  onSubmit: PropTypes.func,\n  onChange: PropTypes.func,\n};\n","const BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '22938064-7e67cff9dc13648fb3a6e967b';\n\nexport default class PhotoApiServer {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchImages() {\n    const url = `${BASE_URL}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${KEY}`;\n\n    return fetch(url).then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n      return Promise.reject(new Error(`Image ${this.searchQuery} not found`));\n    });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport './modal.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.protoType = {\n  onClick: PropTypes.func,\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport './imagegallaryitem.css';\nimport Modal from '../Modal/Modal';\n\nexport default function ImageGalleryItem({ src, description, bigImg }) {\n  const [showModal, setShowModal] = useState(false);\n\n  const toggleModal = () => {\n    setShowModal(showModal => !showModal);\n  };\n\n  return (\n    <>\n      <li className=\"ImageGalleryItem\">\n        <img\n          src={src}\n          alt={description}\n          data-image={bigImg}\n          onClick={toggleModal}\n          className=\"ImageGalleryItem-image\"\n        />\n      </li>\n\n      {showModal && (\n        <Modal onClose={toggleModal}>\n          <img src={bigImg} alt={description} />\n        </Modal>\n      )}\n    </>\n  );\n}\n\nImageGalleryItem.propType = {\n  src: PropTypes.string,\n  alt: PropTypes.string,\n  data: PropTypes.string,\n  onClick: PropTypes.func,\n};\n","import React from 'react';\nimport s from './button.module.css';\nimport PropTypes from 'prop-types';\n\nexport default function Button({ onClick }) {\n  return (\n    <button onClick={onClick} type=\"button\" className={s.Button}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n","import React from 'react';\nimport './inputmessage.css';\n\nexport default function InputMessage() {\n  return <h2 className=\"title\">Please enter image name </h2>;\n}\n","export default __webpack_public_path__ + \"static/media/Error.88e68bf7.jpg\";","import React from 'react';\n// import PropTypes from 'prop-types';\nimport './error.css';\nimport errorImage from '../errorImg/Error.jpg';\n\nexport default function Error({ message }) {\n  return (\n    <>\n      <img className=\"picture\" src={errorImage} alt=\"sadcat\" />\n      <p className=\"param\">{message}</p>\n    </>\n  );\n}\n\n// Error.propTypes = {\n//   message: PropTypes.string,\n//   children: PropTypes.element.isRequired,\n// };\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport './imagegallery.css';\nimport PhotoApiServer from '../api-server/api-server';\nimport ImageGalleryItem from '../ImageGalleryItem/Imagegalleryitem';\nimport Button from '../Button/Button';\nimport InputMessage from '../InputMessage/InputMesage';\nimport Error from '../Error/Error';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Loader from 'react-loader-spinner';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\nconst photoApiServer = new PhotoApiServer();\n\nexport default function ImageGallery({ onClick, imageName }) {\n  const [images, setImages] = useState([]);\n  const [error, setError] = useState(null);\n  const [status, setStatus] = useState(Status.IDLE);\n\n  function updateImages() {\n    photoApiServer\n      .fetchImages()\n      .then(result => {\n        if (result.hits.length > 0) {\n          updateImagesArray(result.hits);\n          photoApiServer.incrementPage();\n          scroll();\n          return;\n        }\n        throw new Error(`Sorry, but not found images ${imageName}`);\n      })\n      .catch(error => {\n        setError(error);\n        setStatus(Status.REJECTED);\n      });\n  }\n\n  useEffect(() => {\n    if (!imageName) return;\n    setStatus(Status.PENDING);\n    photoApiServer.resetPage();\n    photoApiServer.query = imageName;\n    updateImages();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [imageName]);\n\n  const updateImagesArray = update => {\n    if (photoApiServer.page === 1) {\n      setImages(update);\n      setStatus(Status.RESOLVED);\n    }\n    setImages([...images, ...update]);\n    setStatus(Status.RESOLVED);\n  };\n\n  const scroll = () => {\n    if (images.length > 12) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }\n    return;\n  };\n\n  const addImage = () => {\n    updateImages('');\n    setError(Status.PENDING);\n  };\n\n  if (status === Status.IDLE) {\n    return <InputMessage />;\n  }\n\n  if (status === Status.PENDING) {\n    return (\n      <Loader\n        type=\"ThreeDots\"\n        color=\"#00BFFF\"\n        height={300}\n        width={300}\n        timeout={3000}\n      />\n    );\n  }\n\n  if (status === Status.REJECTED) {\n    return <Error message={error.message} />;\n  }\n\n  if (status === Status.RESOLVED) {\n    return (\n      <>\n        <ul className=\"ImageGallery\" onClick={onClick}>\n          {images.map(image => {\n            return (\n              <ImageGalleryItem\n                key={image.id}\n                src={image.webformatURL}\n                bigImg={image.largeImageURL}\n                description={image.tag}\n                imageName={imageName}\n              />\n            );\n          })}\n        </ul>\n\n        <Button onClick={addImage} />\n      </>\n    );\n  }\n}\n\nImageGallery.propType = {\n  onClick: PropTypes.func,\n  imageName: PropTypes.string,\n};\n","import React from 'react';\n// import PropTypes from 'prop-types';\nimport './Container.css';\n\nconst Container = ({ children }) => <div className=\"Container\">{children}</div>;\n\nexport default Container;\n\n// Container.propTypes = {\n//   children: PropTypes.element.isRequired,\n// };\n","import React from 'react';\n// import PropTypes from 'prop-types';\nimport Container from '../Container/Container';\n\nconst Layout = ({ children }) => (\n  <>\n    <Container>{children}</Container>\n  </>\n);\n\nexport default Layout;\n\n// Layout.propTypes = {\n//   children: PropTypes.element.isRequired,\n// };\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport Searchbar from './component/Searchbar/Searchbar';\nimport ImageGallery from './component/Imagegallery/Imagegallery';\n\nimport Layout from './component/Layout/Layout';\n\nexport default class App extends Component {\n  state = {\n    image: '',\n  };\n\n  handleFormSubmit = image => {\n    this.setState({ image });\n  };\n\n  render() {\n    return (\n      <Layout>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery imageName={this.state.image} onClick={this.toggleModal} />\n        <ToastContainer\n          position=\"top-right\"\n          autoClose={5000}\n          hideProgressBar={false}\n          newestOnTop={false}\n          closeOnClick\n          rtl={false}\n          pauseOnFocusLoss\n          draggable\n          pauseOnHover\n        />\n      </Layout>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport './App.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App className={App} />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"searchbar_Searchbar__29HpN\",\"SearchForm\":\"searchbar_SearchForm__235cn\",\"SearchFormButton\":\"searchbar_SearchFormButton__24_Pe\",\"SearchForm-button\":\"searchbar_SearchForm-button__1Vsx3\",\"SearchFormButtonLabel\":\"searchbar_SearchFormButtonLabel__2e7hz\",\"SearchFormInput\":\"searchbar_SearchFormInput__3sAlD\",\"SearchForm-input\":\"searchbar_SearchForm-input___LUIx\"};"],"sourceRoot":""}