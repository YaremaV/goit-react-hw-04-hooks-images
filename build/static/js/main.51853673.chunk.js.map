{"version":3,"sources":["component/Button/button.module.css","component/Searchbar/Searchbar.js","component/api-server/api-server.js","component/Modal/Modal.js","component/ImageGalleryItem/Imagegalleryitem.js","component/Button/Button.js","component/InputMessage/InputMesage.js","component/errorImg/Error.jpg","component/Error/Error.js","component/Imagegallery/Imagegallery.js","component/Container/Container.js","component/Layout/Layout.js","App.js","index.js","component/Searchbar/searchbar.module.css"],"names":["module","exports","Searchbar","state","image","handleImageChange","EventTarget","setState","currentTarget","value","toLowerCase","handleSubmit","evt","preventDefault","trim","props","onSubmit","toast","error","position","theme","className","s","SearchForm","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","propType","PropTypes","string","func","PhotoApiServer","searchQuery","page","url","fetch","then","response","ok","json","Promise","reject","Error","newQuery","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","onClick","children","protoType","ImageGalleryItem","showModal","toggleModal","console","log","src","alt","description","bigImg","data","Button","InputMessage","message","errorImage","photoApiServer","ImageGallery","images","status","updateImagesArray","update","prev","scrollView","length","scrollTo","top","documentElement","scrollHeight","behavior","addImage","updateImages","prevProps","prevState","prevName","imageName","currentName","resetPage","query","fetchImages","result","hits","incrementPage","catch","color","height","width","timeout","map","key","id","webformatURL","largeImageURL","tag","Container","Layout","App","handleFormSubmit","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.51853673.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"button_Button__9Fm20\"};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './searchbar.module.css';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default class Searchbar extends Component {\n  state = {\n    image: '',\n  };\n\n  handleImageChange = EventTarget => {\n    this.setState({ image: EventTarget.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = evt => {\n    evt.preventDefault();\n    if (this.state.image.trim() === '') {\n      toast.error('Введите название изображения!', {\n        position: 'top-left',\n        theme: 'colored',\n      });\n      return;\n    }\n\n    this.props.onSubmit(this.state.image);\n\n    this.setState({ image: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.image}\n            onChange={this.handleImageChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propType = {\n  value: PropTypes.string,\n  onSubmit: PropTypes.func,\n  onChange: PropTypes.func,\n};\n","const BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '22938064-7e67cff9dc13648fb3a6e967b';\n\nexport default class PhotoApiServer {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchImages() {\n    const url = `${BASE_URL}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${KEY}`;\n\n    return fetch(url).then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n      return Promise.reject(new Error(`Image ${this.searchQuery} not found`));\n    });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport './modal.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.protoType = {\n  onClick: PropTypes.func,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport './imagegallaryitem.css';\nimport Modal from '../Modal/Modal';\n\nexport default class ImageGalleryItem extends Component {\n  state = {\n    showModal: false,\n  };\n\n  toggleModal = () => {\n    console.log('click');\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  render() {\n    const { showModal } = this.state;\n    return (\n      <>\n        <li className=\"ImageGalleryItem\">\n          <img\n            src={this.props.src}\n            alt={this.props.description}\n            data-image={this.props.bigImg}\n            onClick={this.toggleModal}\n            className=\"ImageGalleryItem-image\"\n          />\n        </li>\n\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img src={this.props.bigImg} alt={this.props.description} />\n          </Modal>\n        )}\n      </>\n    );\n  }\n}\n\nImageGalleryItem.propType = {\n  src: PropTypes.string,\n  alt: PropTypes.string,\n  data: PropTypes.string,\n  onClick: PropTypes.func,\n};\n","import React from 'react';\nimport s from './button.module.css';\nimport PropTypes from 'prop-types';\n\nexport default function Button({ onClick }) {\n  return (\n    <button onClick={onClick} type=\"button\" className={s.Button}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n","import React from 'react';\nimport './inputmessage.css';\n\nexport default function InputMessage() {\n  return <h2 className=\"title\">Please enter image name </h2>;\n}\n","export default __webpack_public_path__ + \"static/media/Error.88e68bf7.jpg\";","import React from 'react';\n// import PropTypes from 'prop-types';\nimport './error.css';\nimport errorImage from '../errorImg/Error.jpg';\n\nexport default function Error({ message }) {\n  return (\n    <>\n      <img className=\"picture\" src={errorImage} alt=\"sadcat\" />\n      <p className=\"param\">{message}</p>\n    </>\n  );\n}\n\n// Error.propTypes = {\n//   message: PropTypes.string,\n//   children: PropTypes.element.isRequired,\n// };\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport './imagegallery.css';\nimport PhotoApiServer from '../api-server/api-server';\nimport ImageGalleryItem from '../ImageGalleryItem/Imagegalleryitem';\nimport Button from '../Button/Button';\nimport InputMessage from '../InputMessage/InputMesage';\nimport Error from '../Error/Error';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Loader from 'react-loader-spinner';\n\nconst photoApiServer = new PhotoApiServer();\n\nexport default class ImageGallery extends Component {\n  state = {\n    images: [],\n    error: null,\n    status: 'idle',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevName = prevProps.imageName;\n    const currentName = this.props.imageName;\n\n    if (prevName !== currentName) {\n      this.setState({ status: 'pending' });\n      photoApiServer.resetPage();\n      photoApiServer.query = currentName;\n      this.updateImages(currentName);\n    }\n  }\n\n  updateImages() {\n    photoApiServer\n      .fetchImages()\n      .then(result => {\n        if (result.hits.length > 0) {\n          this.updateImagesArray(result.hits);\n          photoApiServer.incrementPage();\n          this.scrollView();\n          return;\n        }\n        throw new Error(`Sorry, but not found images ${this.props.imageName}`);\n      })\n      .catch(error => this.setState({ error, status: 'rejected' }));\n  }\n\n  updateImagesArray = update => {\n    if (photoApiServer.page === 1) {\n      this.setState({ images: update, status: 'resolved' });\n      return;\n    }\n    this.setState(prev => {\n      return { images: [...prev.images, ...update], status: 'resolved' };\n    });\n  };\n\n  scrollView = () => {\n    if (this.state.images.length > 12) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }\n    return;\n  };\n\n  addImage = () => {\n    this.setState({ status: 'pending' });\n    this.updateImages('');\n  };\n\n  // idle;\n  // pending;\n  // resolved;\n  // rejected;\n\n  render() {\n    const { images, error, status } = this.state;\n\n    if (status === 'idle') {\n      return <InputMessage />;\n    }\n\n    if (status === 'pending') {\n      return (\n        <Loader\n          type=\"ThreeDots\"\n          color=\"#00BFFF\"\n          height={300}\n          width={300}\n          timeout={3000}\n        />\n      );\n    }\n    if (status === 'rejected') {\n      return <Error message={error.message} />;\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <ul className=\"ImageGallery\" onClick={this.props.onClick}>\n            {images.map(image => {\n              return (\n                <ImageGalleryItem\n                  key={image.id}\n                  src={image.webformatURL}\n                  bigImg={image.largeImageURL}\n                  description={image.tag}\n                  imageName={this.props.imageName}\n                />\n              );\n            })}\n          </ul>\n\n          <Button onClick={this.addImage} />\n        </>\n      );\n    }\n  }\n}\n\nImageGallery.propType = {\n  onClick: PropTypes.func,\n};\n","import React from 'react';\n// import PropTypes from 'prop-types';\nimport './Container.css';\n\nconst Container = ({ children }) => <div className=\"Container\">{children}</div>;\n\nexport default Container;\n\n// Container.propTypes = {\n//   children: PropTypes.element.isRequired,\n// };\n","import React from 'react';\n// import PropTypes from 'prop-types';\nimport Container from '../Container/Container';\n\nconst Layout = ({ children }) => (\n  <>\n    <Container>{children}</Container>\n  </>\n);\n\nexport default Layout;\n\n// Layout.propTypes = {\n//   children: PropTypes.element.isRequired,\n// };\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport Searchbar from './component/Searchbar/Searchbar';\nimport ImageGallery from './component/Imagegallery/Imagegallery';\n\nimport Layout from './component/Layout/Layout';\n\nexport default class App extends Component {\n  state = {\n    image: '',\n  };\n\n  handleFormSubmit = image => {\n    this.setState({ image });\n  };\n\n  render() {\n    return (\n      <Layout>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery imageName={this.state.image} onClick={this.toggleModal} />\n        <ToastContainer\n          position=\"top-right\"\n          autoClose={5000}\n          hideProgressBar={false}\n          newestOnTop={false}\n          closeOnClick\n          rtl={false}\n          pauseOnFocusLoss\n          draggable\n          pauseOnHover\n        />\n      </Layout>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport './App.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App className={App} />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"searchbar_Searchbar__3nHaB\",\"SearchForm\":\"searchbar_SearchForm__1A2kx\",\"SearchFormButton\":\"searchbar_SearchFormButton__1ki3l\",\"SearchForm-button\":\"searchbar_SearchForm-button__2wJtP\",\"SearchFormButtonLabel\":\"searchbar_SearchFormButtonLabel__2MJtz\",\"SearchFormInput\":\"searchbar_SearchFormInput__3bmyB\",\"SearchForm-input\":\"searchbar_SearchForm-input__3hoOv\"};"],"sourceRoot":""}